<div class="modal" data-modal="true" id="book_modal">
    <div class="modal-content max-w-[600px] top-[15%]">
        <div class="modal-header py-4 px-5">
            <h3 class="modal-title">Ma lecture</h3>
            <a href="#" class="text-blue-500 hover:text-blue-700" data-modal-toggle="#newBook_modal">Ajouter un nouveau livre</a>
        </div>
        <div class="modal-body p-0 pb-5">
            <div class="scrollable-y-auto" data-scrollable="true" data-scrollable-max-height="auto"
                 data-scrollable-offset="300px">
                <form id="book-form" action="{{ path('book_read') }}" method="post">
                    <div class="flex flex-col gap-5 p-5">
                        <div class="flex flex-col gap-1">
                            <label for="book" class="form-label font-normal text-gray-900">Livre</label>
                            <select id="book" name="book" class="select">
                                {% for book in booksToRate %}
                                    <option value="{{ book.id }}">{{ book.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="flex flex-col gap-1">
                            <label class="form-label font-normal text-gray-900">Mes notes</label>
                            <div class="flex flex-col w-full gap-1">
                                <textarea name="comment" class="textarea"placeholder="Notez-ici les idées importantes de l'oeuvre."></textarea>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1">
                            <label for="start_date" class="form-label font-normal text-gray-900">Avez vous terminé la lecture?</label>
                            <select name="isFinished" id="isFinished" class="select">
                                <option value="1">Oui</option>
                                <option value="0">Non</option>
                            </select>
                        </div>

                        <div class="flex flex-col gap-1">
                            <label for="rating" class="form-label font-normal text-gray-900">Note</label>
                            <input type="number" id="rating" name="rating" class="input" min="1" max="5">
                        </div>

                        <div class="flex flex-col gap-1">
                            <button type="submit" class="btn btn-primary">Enregistrer</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{# <script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('book-form');

    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission

        const formData = new FormData(form);

        fetch(form.action, {
            method: form.method,
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Handle success (e.g., show a success message, update the UI, etc.)
                alert('Book read status updated successfully!');
                // Close the modal
                const modal = document.getElementById('book_modal');
                modal.style.display = 'none';
                // Optionally, reset the form
                form.reset();
            } else {
                // Handle error (e.g., show an error message)
                alert('An error occurred while updating the book read status.');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while updating the book read status.');
        });
    });
    document.querySelectorAll('[data-modal-toggle]').forEach(function(toggle) {
        toggle.addEventListener('click', function(event) {
            event.preventDefault();
            const target = document.querySelector(toggle.getAttribute('data-modal-toggle'));
            if (target.style.display === 'none' || target.style.display === '') {
                target.style.display = 'block';
                document.body.classList.add('modal-open');
            } else {
                target.style.display = 'none';
                document.body.classList.remove('modal-open');
            }
        });
    });

    // Close modal when clicking outside of it
    window.addEventListener('click', function(event) {
        if (event.target === modal) {
            modal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
    });
});
</script> #}
